<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<title data-react-helmet="true">6. æ•°æ®æ ¡éªŒ | Fur</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="6. æ•°æ®æ ¡éªŒ | Fur"><meta data-react-helmet="true" name="description" content="6.1 å…³äºæ•°æ®æ ¡éªŒ"><meta data-react-helmet="true" property="og:description" content="6.1 å…³äºæ•°æ®æ ¡éªŒ"><meta data-react-helmet="true" property="og:url" content="https://furos.cn/fur/docs/data-validation"><link data-react-helmet="true" rel="shortcut icon" href="/fur/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://furos.cn/fur/docs/data-validation"><link rel="stylesheet" href="/fur/styles.5a2509b0.css">
<link rel="preload" href="/fur/styles.3e4c1fd1.js" as="script">
<link rel="preload" href="/fur/runtime~main.5ada7f52.js" as="script">
<link rel="preload" href="/fur/main.5995da03.js" as="script">
<link rel="preload" href="/fur/1.03d89260.js" as="script">
<link rel="preload" href="/fur/2.8afac786.js" as="script">
<link rel="preload" href="/fur/31.14a3fd49.js" as="script">
<link rel="preload" href="/fur/32.95dfe640.js" as="script">
<link rel="preload" href="/fur/5b354d3f.d43de57f.js" as="script">
<link rel="preload" href="/fur/17896441.a9215d71.js" as="script">
<link rel="preload" href="/fur/17256d0f.ac467460.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/fur/"><img class="navbar__logo" src="/fur/img/logo.png" alt="Fur Logo"><strong class="navbar__title">Fur</strong></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/fur/docs/"></a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/fur/docs/data-validation"></a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/fur/docs/">æ–‡æ¡£</a><a class="navbar__item navbar__link" href="/fur/blog">åšå®¢</a><a target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">é…ç½®</a></div><div class="navbar__items navbar__items--right"><a target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">è§†é¢‘</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">å·¥å…·</a><ul class="dropdown__menu"><li><a target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">ä»£ç ç”Ÿæˆå™¨</a></li></ul></div><a href="https://gitee.com/monksoul/Fur/board" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">çœ‹æ¿</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">ä»“åº“</a><ul class="dropdown__menu"><li><a href="https://gitee.com/monksoul/Fur" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">Gitee</a></li><li><a href="https://github.com/MonkSoul/Fur" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">GitHub</a></li></ul></div><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/fur/"><img class="navbar__logo" src="/fur/img/logo.png" alt="Fur Logo"><strong class="navbar__title">Fur</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/fur/docs/data-validation"></a></li></ul></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/fur/docs/">æ–‡æ¡£</a></li><li class="menu__list-item"><a class="menu__link" href="/fur/blog">åšå®¢</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" class="menu__link">é…ç½®</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" class="menu__link">è§†é¢‘</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist">å·¥å…·</a><ul class="menu__list"><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" class="menu__link" position="left">ä»£ç ç”Ÿæˆå™¨</a></li></ul></li><li class="menu__list-item"><a href="https://gitee.com/monksoul/Fur/board" target="_blank" rel="noopener noreferrer" class="menu__link">çœ‹æ¿</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist">ä»“åº“</a><ul class="menu__list"><li class="menu__list-item"><a href="https://gitee.com/monksoul/Fur" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">Gitee</a></li><li class="menu__list-item"><a href="https://github.com/MonkSoul/Fur" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">GitHub</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">1. æ¡†æ¶ä»‹ç»</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fur/docs/">1.1 ä»‹ç»</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fur/docs/author">1.2 å…³äºä½œè€…</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">2. é…ç½®ä¸é€‰é¡¹</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fur/docs/configuration">2.1 é…ç½®</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fur/docs/options">2.2 é€‰é¡¹</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/fur/docs/dynamic-api-controller">3. åŠ¨æ€ WebAPI</a></li><li class="menu__list-item"><a class="menu__link" href="/fur/docs/specification-document">4. è§„èŒƒåŒ–æ¥å£æ–‡æ¡£</a></li><li class="menu__list-item"><a class="menu__link" href="/fur/docs/friendly-exception">5. å‹å¥½å¼‚å¸¸å¤„ç†</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/fur/docs/data-validation">6. æ•°æ®æ ¡éªŒ</a></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">6. æ•°æ®æ ¡éªŒ</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="61-å…³äºæ•°æ®æ ¡éªŒ"></a>6.1 å…³äºæ•°æ®æ ¡éªŒ<a aria-hidden="true" tabindex="-1" class="hash-link" href="#61-å…³äºæ•°æ®æ ¡éªŒ" title="Direct link to heading">#</a></h2><p>æ•°æ®æ ¡éªŒå­—é¢ä¸Šçš„æ„æ€å°±æ˜¯å¯¹ä½¿ç”¨è€…æäº¤è¿‡æ¥çš„æ•°æ®è¿›è¡Œåˆæ³•æ€§éªŒè¯ã€‚åœ¨ä¸€å¥—å®Œå–„çš„åº”ç”¨ç³»ç»Ÿä¸­ï¼Œæ•°æ®æœ‰æ•ˆæ€§æ ¡éªŒæ˜¯å¿…ä¸å¯å°‘çš„ä¸šåŠ¡å¤„ç†ç¬¬ä¸€é“å…³å¡ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="62-æ•°æ®æ ¡éªŒçš„å¥½å¤„"></a>6.2 æ•°æ®æ ¡éªŒçš„å¥½å¤„<a aria-hidden="true" tabindex="-1" class="hash-link" href="#62-æ•°æ®æ ¡éªŒçš„å¥½å¤„" title="Direct link to heading">#</a></h2><ul><li>è¿‡æ»¤ä¸å®‰å…¨æ•°æ®ï¼Œæé«˜ç³»ç»Ÿçš„å®‰å…¨æ€§</li><li>å‡å°‘ä¸å¿…è¦çš„ä¸šåŠ¡å¼‚å¸¸å¤„ç†ï¼Œæé«˜ç³»ç»Ÿçš„å“åº”é€Ÿåº¦</li><li>å¤§å¤§æé«˜ç³»ç»Ÿç¨³å®šæ€§</li><li>å¤§æ•°æ®å¹¶å‘æ—¶èµ·ç€ä¸€å®šçš„ç¼“å†²ä½œç”¨</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="63-æ•°æ®æ ¡éªŒæ–¹å¼"></a>6.3 æ•°æ®æ ¡éªŒæ–¹å¼<a aria-hidden="true" tabindex="-1" class="hash-link" href="#63-æ•°æ®æ ¡éªŒæ–¹å¼" title="Direct link to heading">#</a></h2><ul><li>ä¼ ç»Ÿæ–¹å¼ï¼Œåœ¨ä¸šåŠ¡ä»£ç ä¹‹å‰æ‰‹åŠ¨éªŒè¯</li><li><code>Mvc</code> ç‰¹æ€§æ–¹å¼ï¼Œ<code>Mvc</code> å†…ç½®çš„ <code>DataAnnotations</code> æ–¹å¼</li><li><strong>æ¨èæ–¹å¼</strong>ï¼Œ<code>Fur</code> æ¡†æ¶å†…ç½®çš„ <code>DataValidation</code> éªŒè¯</li><li>å…¶ä»–æ–¹å¼ï¼Œä½¿ç”¨ç¬¬ä¸‰æ–¹éªŒè¯åº“ï¼Œå¦‚ <code>FluentValidation</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="631-ä¼ ç»Ÿæ–¹å¼"></a>6.3.1 ä¼ ç»Ÿæ–¹å¼<a aria-hidden="true" tabindex="-1" class="hash-link" href="#631-ä¼ ç»Ÿæ–¹å¼" title="Direct link to heading">#</a></h3><p>åœ¨å¾ˆå¤šè€é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸çœ‹åˆ°è¿™æ ·çš„ä»£ç ï¼š</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-cs codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public bool Insert(Person person)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // éªŒè¯å‚æ•°</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    if(string.IsNullOrEmty(person.Name))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        throw new System.Exception(&quot;åå­—ä¸èƒ½ä¸ºç©º&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    if(person.Age &lt; 18)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        throw new System.Exception(&quot;å¹´é¾„ä¸èƒ½å°äº 18 å²&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    if(!person.Password.Equals(person.ConfirmPassword)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        throw new System.Exception(&quot;ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // ä¸šåŠ¡ä»£ç </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    _repository.Insert(person.Adapt&lt;PersonEntity&gt;());</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>ä»ä¸Šé¢çš„ä»£ç çœ‹èµ·æ¥ï¼Œä¼¼ä¹æ²¡æœ‰ä»€ä¹ˆä¸å¦¥ï¼Œä½†æ˜¯ä»ä¸€ä¸ªç¨‹åºå¯ç»´æŠ¤æ€§æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªç³Ÿç³•çš„ä»£ç ï¼Œå› ä¸ºè¯¥ä¸šåŠ¡ä»£ç ä¸­<strong>åŒ…å«äº†å¤ªå¤šä¸ä¸šåŠ¡æ— å…³çš„æ•°æ®éªŒè¯</strong>ã€‚</p><p>è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœè¿™ä¸ª <code>Person</code> æœ‰ å‡ åä¸ªå‚æ•°éƒ½éœ€è¦éªŒè¯å‘¢ï¼Ÿå¯æƒ³è€ŒçŸ¥ï¼Œè¿™æ˜¯ä¸€ä¸ªåºå¤§çš„ä¸šåŠ¡ä»£ç ã€‚</p><p>å†è€…ï¼Œå¦‚æœå…¶ä»–åœ°æ–¹ä¹Ÿéœ€è¦ç”¨åˆ°è¿™ä¸ª <code>Person</code> ç±»éªŒè¯å‘¢ï¼Ÿé‚£ä»£ç å¥½æ¯”è€é¼ å•ƒè¿‡çš„é¢åŒ…å±‘ä¸€æ ·ï¼Œåˆ°å¤„éƒ½æ˜¯ã€‚</p><p>å¦‚æ­¤å¾—çŸ¥ï¼Œè¿™æ ·çš„æ–¹å¼æ˜¯æå…¶ä¸æ¨èçš„ï¼Œ<strong>ä¸ä½†æ±¡æŸ“äº†ä¸šåŠ¡ä»£ç ï¼Œä¹Ÿç ´åäº†ä¸šåŠ¡èŒè´£å•ä¸€æ€§åŸç†ï¼Œä¹Ÿè®©éªŒè¯é€»è¾‘æ— æ³•å®ç°é€šç”¨ï¼Œåç»­ç»´æŠ¤éš¾åº¦å¤§å¤§å‡çº§</strong>ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="632-mvc-ç‰¹æ€§æ–¹å¼"></a>6.3.2 <code>Mvc</code> ç‰¹æ€§æ–¹å¼<a aria-hidden="true" tabindex="-1" class="hash-link" href="#632-mvc-ç‰¹æ€§æ–¹å¼" title="Direct link to heading">#</a></h3><p>åœ¨ <code>ASP.NET Core</code> ä¸­ï¼Œå¾®è½¯ä¸ºæˆ‘ä»¬æä¾›äº†å…¨æ–°çš„ <code>ç‰¹æ€§</code> éªŒè¯æ–¹å¼ï¼Œå¯é€šè¿‡å¯¹å¯¹è±¡è´´ç‰¹æ€§å®ç°æ•°æ®éªŒè¯ã€‚è¿™ç§æ–¹å¼æœ‰æ•ˆçš„å°†æ•°æ®æ ¡éªŒå’Œä¸šåŠ¡ä»£ç å‰¥ç¦»å¼€æ¥ï¼Œè€Œä¸”å®¹æ˜“ä½¿ç”¨å’Œæ‹“å±•ã€‚</p><ul><li><strong>åœ¨æ¨¡å‹ä¸­éªŒè¯</strong></li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-cs codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">using System.ComponentModel.DataAnnotations;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Hoa.Application.Authorization.Dtos</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public class SignInInput</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        [Required]  // å¿…å¡«éªŒè¯</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        [MinLength(4)]  // æœ€å°é•¿åº¦éªŒè¯</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public string Account { get; set; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        [Required]    // å¿…å¡«éªŒè¯</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        [MaxLength(32)]    // æœ€å¤§é•¿åº¦éªŒè¯</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public string Password { get; set; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><ul><li><strong>åœ¨å‚æ•°ä¸­éªŒè¯</strong></li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-cs codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public void CheckMethodParameterVaild(</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [Required]    // å¿…å¡«éªŒè¯</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [MinLength(4)]    // æœ€å°é•¿åº¦éªŒè¯</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string name,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int age,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [Required]    // å¿…å¡«éªŒè¯</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [RegularExpression(&quot;[a-zA-Z0-9_]{8,30}&quot;)    // æ­£åˆ™è¡¨è¾¾å¼éªŒè¯</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string password,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [Required]    // å¿…å¡«éªŒè¯</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [RegularExpression(&quot;[a-zA-Z0-9_]{8,30}&quot;)    // æ­£åˆ™è¡¨è¾¾å¼éªŒè¯</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string confirmPassword</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // TODO</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>å°æé†’</h5></div><div class="admonition-content"><p>å¦‚æœå‡½æ•°çš„å‚æ•°å¤§äºæˆ–ç­‰äº 3 ä¸ªï¼Œå»ºè®®æŠ½ç¦»å‡ºæ¨¡å‹ç±»ï¼Œä¹Ÿå°±æ˜¯ä¸å»ºè®®ä¸Šé¢çš„æ–¹å¼ã€‚</p></div></div><ul><li><strong>è‡ªå®šä¹‰ç‰¹æ€§éªŒè¯</strong></li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-cs codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">public class ClassicMovieAttribute : ValidationAttribute</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public ClassicMovieAttribute(int year)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Year = year;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public int Year { get; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public string GetErrorMessage() =&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        $&quot;Classic movies must have a release year no later than {Year}.&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    protected override ValidationResult IsValid(object value, ValidationContext validationContext)</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        var movie = (Movie)validationContext.ObjectInstance;</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        var releaseYear = ((DateTime)value).Year;</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        if (movie.Genre == Genre.Classic &amp;&amp; releaseYear &gt; Year)</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">            return new ValidationResult(GetErrorMessage());</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        return ValidationResult.Success;</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><ul><li><strong><code>IValidatableObject</code> å¤æ‚éªŒè¯</strong></li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-cs codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">using System.Collections.Generic;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">public class DtoModel : IValidatableObject</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [Required]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [StringLength(100)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public string Title { get; set; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // ä½ çš„éªŒè¯é€»è¾‘</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    public IEnumerable&lt;ValidationResult&gt; Validate(ValidationContext validationContext)</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        if (ä½ çš„é€»è¾‘ä»£ç )</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">            yield return new ValidationResult(</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">                &quot;é”™è¯¯æ¶ˆæ¯&quot;</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">                ,new[] { nameof(Title) }  // éªŒè¯å¤±è´¥çš„å±æ€§</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">            );</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p><code>Mvc</code> ç‰¹æ€§æ–¹å¼æå¤§çš„å°†ä¸šåŠ¡é€»è¾‘å’ŒéªŒè¯è¿›è¡Œäº†å‰¥ç¦»å’Œè§£è€¦ï¼Œè€Œä¸”è¿˜èƒ½å®ç°è‡ªå®šä¹‰å¤æ‚éªŒè¯ã€‚</p><p><strong>ä½†æ˜¯ <code>Mvc</code> ç‰¹æ€§éªŒè¯æ–¹å¼æœ‰å‡ ä¸ªæ˜æ˜¾çš„ç¼ºç‚¹</strong>ï¼š</p><ul><li>åªèƒ½åœ¨ <code>æ§åˆ¶å™¨</code> ä¸­çš„ <code>Action</code>ï¼ˆåŠ¨ä½œæ–¹æ³•ï¼‰ä¸­ä½¿ç”¨</li><li><strong>æ— æ³•åœ¨ä»»æ„ç±»ã€ä»»æ„æ–¹æ³•ä¸­ä½¿ç”¨</strong></li><li>å†…ç½®çš„éªŒè¯ç±»å‹éå¸¸æœ‰æ•ˆï¼Œä¸”ä¸æ˜“æ‹“å±•</li><li>ä¸æ”¯æŒéªŒè¯æ¶ˆæ¯åæœŸé…ç½®</li></ul><p>æ‰€ä»¥ï¼Œ<code>Fur</code> æä¾›äº†æ–°çš„éªŒè¯å¼•æ“ <code>DataValidation</code>ï¼Œåœ¨å®Œå…¨å…¼å®¹ <code>Mvc</code> å†…ç½®éªŒè¯çš„åŒæ—¶æä¾›äº†å¤§é‡å¸¸è§éªŒè¯ã€å¤æ‚éªŒè¯ã€è‡ªå®šä¹‰éªŒè¯ç­‰èƒ½åŠ›ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="64-datavalidation-éªŒè¯"></a>6.4 <code>DataValidation</code> éªŒè¯<a aria-hidden="true" tabindex="-1" class="hash-link" href="#64-datavalidation-éªŒè¯" title="Direct link to heading">#</a></h2><p><code>DataValidation</code> æ˜¯ <code>Fur</code> æ¡†æ¶æä¾›äº†å…¨æ–°çš„éªŒè¯æ–¹å¼ï¼Œå®Œå…¨å…¼å®¹ <code>Mvc</code> å†…ç½®éªŒè¯ï¼Œå¹¶ä¸”èµ‹äºˆäº†è¶…èƒ½ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="641-datavalidation-ä¼˜ç‚¹"></a>6.4.1 <code>DataValidation</code> ä¼˜ç‚¹<a aria-hidden="true" tabindex="-1" class="hash-link" href="#641-datavalidation-ä¼˜ç‚¹" title="Direct link to heading">#</a></h3><ul><li><strong>å®Œå…¨å…¼å®¹ <code>Mvc</code> å†…ç½®éªŒè¯å¼•æ“</strong></li><li><strong>å†…ç½®å¸¸è§éªŒè¯ç±»å‹åŠå¯è‡ªå®šä¹‰éªŒè¯ç±»å‹åŠŸèƒ½</strong></li><li>æä¾›å…¨å±€å¯¹è±¡æ‹“å±•éªŒè¯æ–¹å¼</li><li>æ”¯æŒéªŒè¯æ¶ˆæ¯åæœŸé…ç½®ï¼Œæ”¯æŒå®æ—¶æ›´æ–°</li><li>æ”¯æŒåœ¨ä»»ä½•ç±»ï¼Œä»»ä½•æ–¹æ³•ã€ä»»ä½•ä½ç½®å®ç°æ‰‹åŠ¨éªŒè¯ã€ç‰¹æ€§æ–¹å¼éªŒè¯ç­‰</li><li>æ”¯æŒè®¾ç½®éªŒè¯ç»“æœæ¨¡å‹</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="65-datavalidation-ä½¿ç”¨"></a>6.5 <code>DataValidation</code> ä½¿ç”¨<a aria-hidden="true" tabindex="-1" class="hash-link" href="#65-datavalidation-ä½¿ç”¨" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="651-æ³¨å†ŒéªŒè¯æœåŠ¡"></a>6.5.1 æ³¨å†ŒéªŒè¯æœåŠ¡<a aria-hidden="true" tabindex="-1" class="hash-link" href="#651-æ³¨å†ŒéªŒè¯æœåŠ¡" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">Fur.Web.Entry/Startup.cs</div><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div tabindex="0" class="prism-code language-cs codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">using Microsoft.AspNetCore.Builder;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">using Microsoft.AspNetCore.Hosting;</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">using Microsoft.Extensions.DependencyInjection;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Fur.Web.Entry</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public class Startup</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // Other Codes...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public void ConfigureServices(IServiceCollection services)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            services.AddApp();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            services.AddControllers()</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">                    .AddDataValidation();    // å¯é€šè¿‡ .AddDataValidation(false) å…³é—­å…¨å±€éªŒè¯å¤„ç†</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public void Configure(IApplicationBuilder app, IWebHostEnvironment env)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            // Other Codes...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>ç‰¹åˆ«æ³¨æ„</h5></div><div class="admonition-content"><p><code>.AddDataValidation()</code> éœ€åœ¨ <code>services.AddControllers()</code> ä¹‹åæ³¨å†Œã€‚åŒæ—¶ <code>services.AddApp()</code> æ€»æ˜¯æœ€å…ˆæ³¨å†Œã€‚</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="652-ç¬¬ä¸€ä¸ªä¾‹å­"></a>6.5.2 ç¬¬ä¸€ä¸ªä¾‹å­<a aria-hidden="true" tabindex="-1" class="hash-link" href="#652-ç¬¬ä¸€ä¸ªä¾‹å­" title="Direct link to heading">#</a></h3></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://gitee.com/monksoul/Fur/tree/alpha/docs/docs/data-validation.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/fur/docs/friendly-exception"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« 5. å‹å¥½å¼‚å¸¸å¤„ç†</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#61-å…³äºæ•°æ®æ ¡éªŒ" class="table-of-contents__link">6.1 å…³äºæ•°æ®æ ¡éªŒ</a></li><li><a href="#62-æ•°æ®æ ¡éªŒçš„å¥½å¤„" class="table-of-contents__link">6.2 æ•°æ®æ ¡éªŒçš„å¥½å¤„</a></li><li><a href="#63-æ•°æ®æ ¡éªŒæ–¹å¼" class="table-of-contents__link">6.3 æ•°æ®æ ¡éªŒæ–¹å¼</a><ul><li><a href="#631-ä¼ ç»Ÿæ–¹å¼" class="table-of-contents__link">6.3.1 ä¼ ç»Ÿæ–¹å¼</a></li><li><a href="#632-mvc-ç‰¹æ€§æ–¹å¼" class="table-of-contents__link">6.3.2 <code>Mvc</code> ç‰¹æ€§æ–¹å¼</a></li></ul></li><li><a href="#64-datavalidation-éªŒè¯" class="table-of-contents__link">6.4 <code>DataValidation</code> éªŒè¯</a><ul><li><a href="#641-datavalidation-ä¼˜ç‚¹" class="table-of-contents__link">6.4.1 <code>DataValidation</code> ä¼˜ç‚¹</a></li></ul></li><li><a href="#65-datavalidation-ä½¿ç”¨" class="table-of-contents__link">6.5 <code>DataValidation</code> ä½¿ç”¨</a><ul><li><a href="#651-æ³¨å†ŒéªŒè¯æœåŠ¡" class="table-of-contents__link">6.5.1 æ³¨å†ŒéªŒè¯æœåŠ¡</a></li><li><a href="#652-ç¬¬ä¸€ä¸ªä¾‹å­" class="table-of-contents__link">6.5.2 ç¬¬ä¸€ä¸ªä¾‹å­</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">æ–‡æ¡£</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/fur/docs/">å¿«é€Ÿå…¥é—¨</a></li><li class="footer__item"><a class="footer__link-item" href="/fur/docs/">æ–‡æ¡£æŒ‡å—</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">ç¤¾åŒº</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">æ›´å¤š</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/fur/blog">åšå®¢</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 Fur, Baiqian. Built with Docusaurus.</div></div></div></footer></div>
<script src="/fur/styles.3e4c1fd1.js"></script>
<script src="/fur/runtime~main.5ada7f52.js"></script>
<script src="/fur/main.5995da03.js"></script>
<script src="/fur/1.03d89260.js"></script>
<script src="/fur/2.8afac786.js"></script>
<script src="/fur/31.14a3fd49.js"></script>
<script src="/fur/32.95dfe640.js"></script>
<script src="/fur/5b354d3f.d43de57f.js"></script>
<script src="/fur/17896441.a9215d71.js"></script>
<script src="/fur/17256d0f.ac467460.js"></script>
</body>
</html>