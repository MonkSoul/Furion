<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.1">
<link rel="alternate" type="application/rss+xml" href="/furion/blog/rss.xml" title="Furion Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/furion/blog/atom.xml" title="Furion Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Furion" href="/furion/opensearch.xml"><title data-react-helmet="true">5. 动态 WebAPI | Furion</title><meta data-react-helmet="true" property="og:url" content="https://furion.pro/furion/docs/dynamic-api-controller"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="5. 动态 WebAPI | Furion"><meta data-react-helmet="true" name="description" content="动态WebAPI 实际上就是将普通的类变为 Controller，也就是 动态WebAPI 就是控制器，支持控制器一切功能。"><meta data-react-helmet="true" property="og:description" content="动态WebAPI 实际上就是将普通的类变为 Controller，也就是 动态WebAPI 就是控制器，支持控制器一切功能。"><link data-react-helmet="true" rel="shortcut icon" href="/furion/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://furion.pro/furion/docs/dynamic-api-controller"><link data-react-helmet="true" rel="alternate" href="https://furion.pro/furion/docs/dynamic-api-controller" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://furion.pro/furion/docs/dynamic-api-controller" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/furion/assets/css/styles.472b51ff.css">
<link rel="preload" href="/furion/assets/js/runtime~main.7bd0cc2c.js" as="script">
<link rel="preload" href="/furion/assets/js/main.7dfe4c9c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div class="furion-give-me-star">⭐️ 如果你喜欢 <a href="https://gitee.com/dotnetchina/Furion" target="_blank">Furion</a> ，可以在 <a href="https://gitee.com/dotnetchina/Furion" target="_blank">Gitee</a> 中给个<a href="https://gitee.com/dotnetchina/Furion" target="_blank"><img class="furion-gitee-star" src="https://gitee.com/dotnetchina/Furion/badge/star.svg?theme=gvp" alt="star"></a> ⭐️</div><div><a href="#main" class="skipToContent_1oUP shadow--md">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/furion/"><img src="/furion/img/furionlogo.png" alt="Furion Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/furion/img/furionlogo.png" alt="Furion Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Furion</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/furion/docs">文档</a><a class="navbar__item navbar__link" href="/furion/docs/global/app">静态类</a><a class="navbar__item navbar__link" href="/furion/docs/settings/appsettings">配置</a><a class="navbar__item navbar__link" href="/furion/blog">博客</a><a class="navbar__item navbar__link" href="/furion/docs/upgrade">更新日志</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link">源码</a><ul class="dropdown__menu"><li><a href="https://gitee.com/dotnetchina/Furion" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Gitee<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/MonkSoul/Furion" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><a href="https://www.chinadot.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>社区<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a class="navbar__item navbar__link" href="/furion/docs/case">案例</a><a class="navbar__item navbar__link" href="/furion/docs/donate">支持✨</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/furion/"><img src="/furion/img/furionlogo.png" alt="Furion Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/furion/img/furionlogo.png" alt="Furion Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Furion</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/furion/docs">文档</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/global/app">静态类</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/settings/appsettings">配置</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/blog">博客</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/upgrade">更新日志</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">源码</a><ul class="menu__list"><li class="menu__list-item"><a href="https://gitee.com/dotnetchina/Furion" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Gitee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://github.com/MonkSoul/Furion" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></li><li class="menu__list-item"><a href="https://www.chinadot.net" target="_blank" rel="noopener noreferrer" class="menu__link"><span>社区<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/case">案例</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/donate">支持✨</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo sidebarWithHideableNavbar_267A"><a tabindex="-1" class="sidebarLogo_3h0W" href="/furion/"><img src="/furion/img/furionlogo.png" alt="Furion Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/furion/img/furionlogo.png" alt="Furion Logo" class="themedImage_1VuW themedImage--dark_hz6m"><b>Furion</b></a><nav class="menu menu--responsive thin-scrollbar menu_Bmed" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">1. 序言</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/">1.1 介绍</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/author">1.2 关于作者</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/source">1.3 示例结构</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/case">1.4 框架案例</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/donate">1.5 支持 Furion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/upgrade">1.6 更新日志</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/course">1.7 发展大事记</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">2. 入门指南</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/get-start">2.1 一分钟上手</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/template">2.2 官方脚手架</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/reference">2.3 手动搭建分层</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/inject">2.4 神奇的 Inject</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/appstartup">3. 应用启动 Startup</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">4. 配置与选项</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/configuration">4.1 配置</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/options">4.2 选项</a></li></ul></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/furion/docs/dynamic-api-controller">5. 动态 WebAPI</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/specification-document">6. 规范化接口文档 (Swagger)</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/friendly-exception">7. 友好异常处理</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/data-validation">8. 数据校验</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">9. 数据库操作指南（EFCore）</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-start">9.0 入门简要 ✨</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext">9.1 数据库上下文</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-locator">9.2 数据库上下文定位器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/entity">9.3 数据库实体</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-repository">9.4 仓储模式 (Repository)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-add">9.5 新增操作</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-update">9.6 更新操作</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-add-or-update">9.7 新增或更新操作</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-delete">9.8 删除操作</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-batch">9.9 批量操作</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-query">9.10 查询操作</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-hight-query">9.11 高级查询操作</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-view">9.12 视图操作</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-proc">9.13 存储过程操作</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-function">9.14 函数操作</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-sql">9.15 Sql 操作</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-sql-template">9.16 Sql 模板</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-sql-proxy">9.17 Sql 高级代理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-multi-database">9.18 多种数据库操作 ✨</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-db-first">9.19 数据库生成模型 (Db First)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-code-first">9.20 模型生成数据库 (Code First)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-seed-data">9.21 实体种子数据</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-audit">9.22 审计日志 (Audit)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-filter">9.23 实体/全局查询筛选器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-Interceptor">9.24 数据库操作拦截器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-entitytrigger">9.25. 实体数据监听器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/tran">9.26 事务和工作单元 (UnitOfWork)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dbcontext-read-write">9.27 读写分离/主从复制</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/split-db">9.28 分表分库</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/efcore-recommend">9.29 EFCore 最佳实践</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">10. SqlSugar 或其他 ORM</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/sqlsugar">10.1. SqlSugar 集成</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/dapper">10.2. Dapper 集成</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/mongodb">10.3. MongoDB 操作</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/saas">11. SaaS 多租户</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/dependency-injection">12. 依赖注入/控制反转</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/object-mapper">13. 对象数据映射 Mapper</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/cache">14. 分布式缓存</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/auth-control">15. 安全鉴权</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/cors">16. CORS 跨域</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/view-engine">17. 视图引擎</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/logging">18. 日志记录</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/http">19. 远程请求 (HttpClient)</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/encryption">20. 数据加解密</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/local-language">21. 全球化和本地化（多语言）</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/event-bus">22. 事件总线</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/json-serialization">23. JSON 序列化</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/signalr">24. 即时通讯</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/process-service">25. 辅助角色服务 (Worker Service)</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/job">26. 定时任务/后台任务</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/idgenerator">27. 分布式 ID 生成</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/module-dev">28. 模块化开发</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/clayobj">29. 粘土对象</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/sensitive-detection">30. 脱敏处理</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/file-provider">31. 虚拟文件系统</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/sesssion-state">32. 会话和状态管理</a></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/microservice">33. Anno 微服务</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">34. 托管部署</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/deploy-iis">34.1 在 IIS 部署</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/deploy-docker">34.2 在 Docker 部署</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/deploy-nginx">34.3 在 Nginx 部署</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/virtual-deploy">34.4 二级虚拟目录部署</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">35. 持续部署集成</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/deploy-docker-auto">35.1 Docker 环境持续部署</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/devops">35.2 持续部署集成</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">36. 测试指南</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/unittest">36.1 单元测试</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/performance">36.2 性能测试</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/furion/docs/benchmark">36.3 基准测试</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/furion/docs/contribute">37. 贡献指南</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">5. 动态 WebAPI</h1></header><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>小知识</h5></div><div class="admonition-content"><p><code>动态WebAPI</code> 实际上就是将普通的类变为 <code>Controller</code>，也就是 <code>动态WebAPI</code> 就是控制器，支持控制器一切功能。</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="51-什么是控制器"></a>5.1 什么是控制器<a class="hash-link" href="#51-什么是控制器" title="Direct link to heading">#</a></h2><p>简单来说，控制器是一个承上启下的作用，根据用户输入，执行响应行为（动作方法），同时在行为中调用模型的业务逻辑，返回给用户结果（视图）。</p><img src="/furion/img/kzq.png"><p></p><p>在 <code>ASP.NET Core</code> 中，控制器有两种表现形式：</p><ul><li><code>Mvc</code>（带视图）</li><li><code>WebAPI</code>（RESTful API）</li></ul><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Mvc 控制器</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">WebAPI 控制器</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">using Microsoft.AspNetCore.Mvc;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Web.Entry.Controllers</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    public class MvcController : Controller</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        public IActionResult Index()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return View();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">using Microsoft.AspNetCore.Mvc;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Web.Entry.Controllers</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [Route(&quot;api/[controller]&quot;)]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    public class WebApiController : ControllerBase</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        [HttpGet]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        public IActionResult Get()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return Content(nameof(Furion));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p><code>Mvc</code> 控制器和 <code>WebAPI</code> 控制器最大的区别是 <code>WebAPI</code> 控制器不带 <strong>视图</strong> 和通过 <strong>请求谓词和路由地址响应行为</strong>。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="52-mvc-控制器-约定和缺点"></a>5.2 <code>Mvc 控制器</code> 约定和缺点<a class="hash-link" href="#52-mvc-控制器-约定和缺点" title="Direct link to heading">#</a></h2><p>在学习动态 <code>WebAPI</code> 控制器之前，首先了解 <code>ASP.NET Core</code> 中 <code>WebAPI</code> 的一些约定和注意事项。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="521-webapi-约定"></a>5.2.1 <code>WebAPI</code> 约定<a class="hash-link" href="#521-webapi-约定" title="Direct link to heading">#</a></h3><p>在 <code>ASP.NET Core</code> 应用中，一个 <code>WebAPI</code> 控制器需遵循以下约定：</p><ul><li>控制器类<strong>必须继承 <code>ControllerBase</code> 或间接继承</strong></li><li>动作方法<strong>必须贴有 <code>[HttpMethod]</code> 特性，如：<code>[HttpGet]</code></strong></li><li>控制器或动作方法<strong>至少有一个配置 <code>[Route]</code> 特性</strong></li><li>生成 <code>WebAPI</code> 路由地址时会自动去掉控制器名称 <code>Controller</code> 后缀，同时也会去掉动作方法匹配的 <code>HttpVerb</code> 谓词，如 <code>GET，POST，DELETE，PUT</code> 等</li><li><strong>不支持返回非 <code>IEnumerable&lt;T&gt;</code> 泛型对象</strong></li><li><strong>不支持类类型参数在 <code>GET，HEAD</code> 请求下生成 <code>Query</code> 参数</strong></li></ul><p>除了上述约定外，<code>WebAPI</code> 路由地址<strong>基本靠手工完成</strong>，不利于书写，不利于维护，再者，在移动应用对接中难以进行多版本控制。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="522-net-core-webapi-缺点"></a>5.2.2 <code>.NET Core WebAPI</code> 缺点<a class="hash-link" href="#522-net-core-webapi-缺点" title="Direct link to heading">#</a></h3><p>通过上一章节可以看出，<code>ASP.NET Core</code> 应用实现 <code>WebAPI</code> 需要遵循种种约定，而且容易出错。</p><p>除了这些约定，<code>.NET Core WebAPI</code> 有以下缺点：</p><ul><li>路由地址基本靠手工完成</li><li>在现在移动为王的时代，不利于进行多版本控制</li><li>对接 <code>Swagger</code> 文档分组比较复杂</li><li>实现 <code>Policy</code> 策略授权也比较复杂</li><li>不支持控制器热插拔插件化</li><li>难以实现复杂自定义的 <code>RESTful API</code> 风格</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="53-动态-webapi-控制器"></a>5.3 动态 <code>WebAPI</code> 控制器<a class="hash-link" href="#53-动态-webapi-控制器" title="Direct link to heading">#</a></h2><p>针对以上 <code>ASP.NET Core</code> 提供的 <code>WebAPI</code> 必须遵循的约定和不可避免的缺点，<code>Furion</code> 框架创造出一种更加灵活创建 <code>WebAPI</code> 控制器的方式。</p><p>这个方式在继承了 <code>ASP.NET Core WebAPI</code> 所有优点，同时进行了大量拓展和优化。优化后的 <code>WebAPI</code> 具有以下优点：</p><ul><li>具备原有的 <code>ControllerBase</code> 所有功能</li><li>支持<strong>任意公开 非静态 非抽象 非泛型类</strong>转控制器</li><li>提供更加灵活方便的 <code>IDynamicApiController</code> 空接口或 <code>[DynamicApiController]</code> 特性替代 <code>ControllerBase</code> 抽象类</li><li>无需手动配置 <code>[HttpMethod]</code> 特性，同时支持一个动作方法多个 <code>HttpVerb</code></li><li>无需手动配置 <code>[Route]</code> 特性，支持更加灵活的配置及自动路由生成</li><li>支持返回泛型接口，泛型类</li><li>和 <code>Swagger</code> 深度结合，提供极其方便的创建 <code>Swagger</code> 分组配置</li><li>支持 <code>Basic Auth，Jwt，ApiKey</code> 等多种权限灵活配置</li><li>支持控制器、动作方法<strong>版本控制</strong>功能</li><li>支持 <code>GET、HEAD</code> 请求自动转换 <code>类类型参数</code></li><li>支持生成 <code>OAS3</code> 接口规范</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="54-注册动态-webapi-服务"></a>5.4 注册动态 <code>WebAPI</code> 服务<a class="hash-link" href="#54-注册动态-webapi-服务" title="Direct link to heading">#</a></h2><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>备注</h5></div><div class="admonition-content"><p><code>.AddDynamicApiControllers()</code> 默认已经集成在 <code>AddInject()</code> 中了，无需再次注册。也就是下列代码可不配置。</p></div></div><div class="codeBlockContainer_K1bP"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_eoMF">Furion.Web.Core\FurWebCoreStartup.cs</div><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Microsoft.Extensions.DependencyInjection;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Web.Core</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    [AppStartup(800)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public sealed class FurWebCoreStartup : AppStartup</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public void ConfigureServices(IServiceCollection services)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            services.AddControllers()</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">                    .AddDynamicApiControllers();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>特别注意</h5></div><div class="admonition-content"><p><code>.AddDynamicApiControllers()</code> 必须在 <code>services.AddControllers()</code> 之后注册。</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="55-第一个例子"></a>5.5 第一个例子<a class="hash-link" href="#55-第一个例子" title="Direct link to heading">#</a></h2><p>创建一个 <code>FurionAppService</code> 类继承 <code>IDynamicApiController</code> 接口 或 贴 <code>[DynamicApiController]</code> 特性，并在这个类中编写一个 <code>Get</code> 方法。</p><ul><li><strong><code>IDynamicApiController</code> 方式</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        public string Get()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return $&quot;Hello {nameof(Furion)}&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li><strong><code>[DynamicApiController]</code> 方式</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [DynamicApiController]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        public string Get()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return $&quot;Hello {nameof(Furion)}&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示，一个 <code>WebAPI</code> 接口就这么生成了。</p><img src="/furion/img/dyglz.gif"><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="56-动态-webapi-原理解析"></a>5.6 动态 <code>WebAPI</code> 原理解析<a class="hash-link" href="#56-动态-webapi-原理解析" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="561-控制器特性提供器"></a>5.6.1 控制器特性提供器<a class="hash-link" href="#561-控制器特性提供器" title="Direct link to heading">#</a></h3><p><code>Furion</code> 框架会在应用启动时注册 <code>DynamicApiControllerFeatureProvider</code> 控制器特性提供器，该提供器继承自 <code>ControllerFeatureProvider</code> 类。</p><p>接着重写 <code>bool IsController(TypeInfo typeInfo)</code> 方法，用来标识控制器类型。在 <code>Furion</code> 框架中，<strong>继承自 <code>ControllerBase</code> 类或 <code>IDynamicApiController</code> 接口或 <code>[DynamicApiController]</code> 特性都会被标记为控制器类型。</strong></p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="562-应用模型转换器"></a>5.6.2 应用模型转换器<a class="hash-link" href="#562-应用模型转换器" title="Direct link to heading">#</a></h3><p><code>Furion</code> 框架同时在应用启动时注册 <code>DynamicApiControllerApplicationModelConvention</code> 应用模型转换器，该转换器继承自 <code>IApplicationModelConvention</code> 接口。</p><p>接着实现 <code>void Apply(ApplicationModel application)</code> 接口方法。在该方法中配置控制器名称、路由、导出可见性及动作方法名称、路由、导出可见性等。</p><p>实际上该方法做的就是按照 <strong><a href="#521-webapi-%E7%BA%A6%E5%AE%9A">WebAPI 约定</a></strong> 提前帮我们配置好路由、请求谓词等信息。避免了手动配置的同时还增加了许多新特性，如<strong>版本控制。</strong></p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="57-动态-webapi-配置约定"></a>5.7 动态 <code>WebAPI</code> 配置约定<a class="hash-link" href="#57-动态-webapi-配置约定" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="571-控制器默认约定"></a>5.7.1 控制器默认约定<a class="hash-link" href="#571-控制器默认约定" title="Direct link to heading">#</a></h3><ul><li>生成控制器名称默认去除以 <code>AppServices，AppService，ApiController，Controller，Services，Service</code> 作为前后缀的字符串。见第一个例子中的 <code>FurionAppService -&gt; Furion</code> <strong>支持自定义配置</strong></li><li>控制器名称带 <code>V[0-9_]</code> 结尾的，会自动生成控制器版本号，如 <code>FurionAppServiceV2 -&gt; Furion@2</code>，<code>FurionAppServiceV1_1_0 -&gt; Furion@1.1.0</code>。<strong>支持版本分隔符配置</strong></li><li>控制名称以 <code>骆驼命名（CamelCase）</code> 会自动切割成多个单词 <code>-</code> 连接。<strong>支持自定义配置</strong></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="572-动作方法默认约定"></a>5.7.2 动作方法默认约定<a class="hash-link" href="#572-动作方法默认约定" title="Direct link to heading">#</a></h3><ul><li>生成的动作方法名称默认去除以 <code>Post/Add/Create/Insert/Submit，GetAll/GetList/Get/Find/Fetch/Query/Search，Put/Update，Delete/Remove/Clear，Patch</code> 开头的字符串。<strong>支持自定义配置</strong></li><li>生成的动作方法名称默认去除以 <code>Async</code> 作为前后缀的字符串。<strong>支持自定义配置</strong></li><li>动作方法名称带 <code>V[0-9_]</code> 结尾的，会自动生成动作方法版本号，如 <code>ChangePasswordV2 -&gt; ChangePassword@2</code>，<code>ChangePasswordV1_1_0 -&gt; ChangePassword@1.1.0</code>。<strong>支持版本分隔符配置</strong></li><li>动作方法名称以 <code>骆驼(驼峰)/帕斯卡命名（CamelCase/Pascal）</code> 会自动切割成多个单词 <code>-</code> 连接。<strong>支持自定义配置</strong></li><li>动作方法参数将自动转为小写。<strong>支持自定义配置</strong></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="573-请求谓词默认约定"></a>5.7.3 请求谓词默认约定<a class="hash-link" href="#573-请求谓词默认约定" title="Direct link to heading">#</a></h3><ul><li>动作方法名<ul><li>以 <code>Post/Add/Create/Insert/Submit</code> 开头，则添加 <code>[HttpPost]</code> 特性。</li><li>以 <code>GetAll/GetList/Get/Find/Fetch/Query</code> 开头，则添加 <code>[HttpGet]</code> 特性。</li><li>以 <code>Put/Update</code> 开头，则添加 <code>[HttpPut]</code> 特性。</li><li>以 <code>Delete/Remove/Clear</code> 开头，则添加 <code>[HttpDelete]</code> 特性。</li><li>以 <code>Patch</code> 开头，则添加 <code>[HttpPatch]</code> 特性</li><li><strong>支持自定义配置</strong></li></ul></li><li>如果不在上面约定中，则默认添加 <code>[HttpPost]</code> 特性。<strong>支持自定义配置</strong></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="574-路由地址默认约定"></a>5.7.4 路由地址默认约定<a class="hash-link" href="#574-路由地址默认约定" title="Direct link to heading">#</a></h3><ul><li>默认以 <code>api</code> 开头。<strong>支持自定义配置</strong></li><li>默认转换为小写路由地址。<strong>支持自定义配置</strong></li><li>生成控制器路由模板格式为：<code>api/前置参数列表/模块名或默认区域名/[controller@版本号]/后置参数列表</code></li><li>生成动作方法路由模板格式为：<code>前置参数列表/模块名/[action@版本号]/后置参数列表</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="575-其他约定"></a>5.7.5 其他约定<a class="hash-link" href="#575-其他约定" title="Direct link to heading">#</a></h3><ul><li>默认不处理 <code>ControllerBase</code> 控制器类型。<strong>支持自定义配置</strong></li><li>默认不处理 <code>GET，HEAD</code> 请求的引用类型参数。<strong>支持自定义配置</strong></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="58-更多例子"></a>5.8 更多例子<a class="hash-link" href="#58-更多例子" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="581-多种请求谓词方法"></a>5.8.1 多种请求谓词方法<a class="hash-link" href="#581-多种请求谓词方法" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        public string Get()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return $&quot;GET 请求&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        public string Post()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return $&quot;POST 请求&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        public string Delete()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return $&quot;DELETE 请求&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        public string Put()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return $&quot;PUT 请求&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        public string Patch()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return $&quot;PATCH 请求&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/dgqqwc.png"><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="582-多个自定义动作方法"></a>5.8.2 多个自定义动作方法<a class="hash-link" href="#582-多个自定义动作方法" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        public string GetVersion()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return $&quot;v1.0.0&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        public string ChangeProfile()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return &quot;修改成功&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        public string DeleteUser()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return &quot;删除成功&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/dzmc.png"><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="583-带参数动作方法"></a>5.8.3 带参数动作方法<a class="hash-link" href="#583-带参数动作方法" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        public string GetUser(int id)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return $&quot;{id}&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        public string GetUser(int id, string name)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return $&quot;{id} {name}&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        public TestDto Add(TestDto testDto)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return testDto;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/dcsff.gif"><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="584-gethead-类类型参数"></a>5.8.4 <code>GET/HEAD</code> 类类型参数<a class="hash-link" href="#584-gethead-类类型参数" title="Direct link to heading">#</a></h3><p>默认情况下，<code>ASP.NET Core</code> 会将 <code>GET/HEAD</code> 请求中的 <code>类类型参数</code> 设置为 <code>[FromBody]</code> 绑定，如：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        public TestDto GetTest(TestDto testDto)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return testDto;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/getyycs.png"><p>但是，<code>GET、HEAD</code> 请求不支持 <code>From Body</code> 绑定。所以我们需要转换为 <code>Query</code> 查询参数。</p><p><code>Furion</code> 框架支持以下两种方式配置：</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">[FromQuery] 特性</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">配置 DynamicApiControllerSettings</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">using Microsoft.AspNetCore.Mvc;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        public TestDto GetTest([FromQuery] TestDto testDto)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return testDto;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_eoMF">Furion.Web.Entry/appsettings.json</div><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;DynamicApiControllerSettings&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;ModelToQuery&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>如下图所示：</p><img src="/furion/img/modeltoquery.png"><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="585-自定义参数位置"></a>5.8.5 自定义参数位置<a class="hash-link" href="#585-自定义参数位置" title="Direct link to heading">#</a></h3><p><code>Furion</code> 框架提供了非常方便的自定义参数位置的特性 <code>[ApiSeat]</code>，通过 <code>[ApiSeat]</code> 可配置参数位置，支持以下四种位置：</p><ul><li><code>ApiSeats.ControllerStart</code>：控制器之前</li><li><code>ApiSeats.ControllerEnd</code>：控制器之后</li><li><code>ApiSeats.ActionStart</code>：动作方法之前</li><li><code>ApiSeats.ActionEnd</code>：动作方法之后。<strong>默认值</strong></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">using System;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        // 参数默认为 ApiSeats.ActionEnd</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        public string RouteSeat(int id, string name)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return &quot;配置路由参数位置&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string RouteSeat(</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">            [ApiSeat(ApiSeats.ControllerStart)] int id, // 控制器名称之前</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">            [ApiSeat(ApiSeats.ControllerEnd)] string name, // 控制器名称之后</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">            [ApiSeat(ApiSeats.ControllerEnd)] int age, // 控制器名称之后</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">            [ApiSeat(ApiSeats.ActionStart)] decimal weight, // 动作方法名称之前</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">            [ApiSeat(ApiSeats.ActionStart)] float height, // 动作方法名称之前</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">            [ApiSeat(ApiSeats.ActionEnd)] DateTime birthday) // 动作方法名称之后（默认值）</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return &quot;配置路由参数位置&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/cswz.png"><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>温馨提示</h5></div><div class="admonition-content"><p>多个 <strong><code>同位置</code></strong> 配置的参数将按照 <strong><code>定义参数顺序</code></strong> 进行排序。</p></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>特别注意</h5></div><div class="admonition-content"><p><code>[ApiSeat]</code> 只能应用于贴了 <code>[FromRoute]</code> 特性的参数或 <code>基元类型、值类型、可空基元类型和可空值类型</code>。</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="586-自定义请求谓词"></a>5.8.6 自定义请求谓词<a class="hash-link" href="#586-自定义请求谓词" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">using Microsoft.AspNetCore.Mvc;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        [HttpPost]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string GetVersion()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return &quot;1.0.0&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/zdywc.png"><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="587-支持多个谓词"></a>5.8.7 支持多个谓词<a class="hash-link" href="#587-支持多个谓词" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">using Microsoft.AspNetCore.Mvc;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        [HttpPost, HttpGet, AcceptVerbs(&quot;PUT&quot;, &quot;DELETE&quot;)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string GetVersion()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return &quot;1.0.0&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/dgwc.png"><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>特别注意</h5></div><div class="admonition-content"><p>如果动作方法中含有 <code>类类型参数</code>，且含有 <code>POST/PUT/DELETE</code> 任意请求谓词，那么该参数会自动添加 <code>[FromBody]</code> 参数，即使在 <code>GET/HEAD</code> 请求中不支持。</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="588-支持自定义路由"></a>5.8.8 支持自定义路由<a class="hash-link" href="#588-支持自定义路由" title="Direct link to heading">#</a></h3><p>支持控制器和动作方法自定义路由：</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">自定义控制器路由</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">自定义动作方法路由</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">同时自定义路由</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">谓词自定义路由</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">using Microsoft.AspNetCore.Mvc;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [Route(&quot;customapi/mobile/[controller]&quot;)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string GetVersion()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return &quot;1.0.0&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/kzqrl.png"></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">using Microsoft.AspNetCore.Mvc;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        [Route(&quot;customapi/[action]&quot;)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string GetVersion()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return &quot;1.0.0&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/dzffrl.png"></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">using Microsoft.AspNetCore.Mvc;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [Route(&quot;customapi/mobile/[controller]&quot;)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        [Route(&quot;get/[action]&quot;)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string GetVersion()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return &quot;1.0.0&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/allrl.png"></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Microsoft.AspNetCore.Mvc;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    [Route(&quot;api/[controller]&quot;)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        [HttpGet(&quot;get/[action]&quot;)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string GetVersion()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return &quot;1.0.0&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/wcrl.png"></div></div></div><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>小提示</h5></div><div class="admonition-content"><p>动作方法自定义路由如果以 <strong><code>/</code></strong> 开头，则不会合并控制器路由。</p></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>推荐配置</h5></div><div class="admonition-content"><p>自定义路由如果需要用到 <strong>控制器/动作方法名称</strong>，推荐使用 <code>[controller]</code> 或 <code>[action]</code> 占位符，因为该占位符已经自动处理了 <strong>前后缀、版本号、模块名称</strong>等。</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="589-多路由随意组合"></a>5.8.9 多路由随意组合<a class="hash-link" href="#589-多路由随意组合" title="Direct link to heading">#</a></h3><p><code>Furion</code> 框架提供了非常灵活的各种路由组合方式，支持一对多，多对多路由组合：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Microsoft.AspNetCore.Mvc;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [Route(&quot;api/[controller]&quot;)]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [Route(&quot;api/[controller]/second&quot;)]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [Route(&quot;api/[controller]/three&quot;)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        [HttpGet]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        [HttpGet(&quot;get/[action]&quot;)]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        [HttpPost]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        [HttpPost(&quot;post/cus-version&quot;)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string GetVersion()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return &quot;1.0.0&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/dlrzh.gif"><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>特别注意</h5></div><div class="admonition-content"><p>动作方法不能同时贴 <code>[Route]</code> 和 <code>[HttpMethod]</code> 特性，只能二取一。</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="5810-支持版本控制"></a>5.8.10 支持版本控制<a class="hash-link" href="#5810-支持版本控制" title="Direct link to heading">#</a></h3><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">控制器版本</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">动作方法版本</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppServiceV1 : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string Get()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppServiceV1_2 : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string Get()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppServiceV1_2_1 : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string Get()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/kzqbb.png"></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        public string Get()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        public string GetV1()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        public string GetV2_1()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/dzffbb.png"></div></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>版本生成原理</h5></div><div class="admonition-content"><p><strong><code>V[0-9_]</code></strong> 结尾的命名自动解析成版本号，如 <strong><code>FurionAppServiceV2 -&gt; Furion@2</code></strong>。</p></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>版本复写</h5></div><div class="admonition-content"><p>除了通过特定后缀方式以外，版本还直接通过 <code>[ApiDescriptionSettings]</code> 进行复写。如：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">[ApiDescriptionSettings(Version = &quot;4.0&quot;)]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">public string GetV1()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>这时，生成版本将采用 <code>4.0</code> 替代 <code>1</code></p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="5811-不公开控制器或动作方法"></a>5.8.11 不公开控制器或动作方法<a class="hash-link" href="#5811-不公开控制器或动作方法" title="Direct link to heading">#</a></h3><p>有些时候，我们无需导出某个动作方法或控制器（<strong>不显示到 Swagger</strong>），只需要添加 <code>[ApiDescriptionSettings(false)]</code> 或 <code>[ApiExplorerSettings(IgnoreApi = true)]</code>即可。</p><p>另外动作方法还支持 <code>[NonAction]</code> 标记不是一个有效的控制器或 Action。</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>推荐使用</h5></div><div class="admonition-content"><p>推荐控制器或动作方法设置不导出使用 <code>[ApiDescriptionSettings(false)]</code> 特性。该特性默认继承自 <code>ApiExplorerSettingsAttribute</code> 类。</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="5812-保持控制器和方法命名"></a>5.8.12 保持控制器和方法命名<a class="hash-link" href="#5812-保持控制器和方法命名" title="Direct link to heading">#</a></h3><p>默认情况下，动态 API 会将控制器和方法名输出为 <code>RESTFul</code> 风格的路由，如需保留原有设计，只需配置：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;DynamicApiControllerSettings&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;KeepName&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;KeepVerb&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;LowercaseRoute&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="5813-方法参数-fromquery-化参数非必填参数可选"></a>5.8.13 方法参数 <code>[FromQuery]</code> 化/参数非必填/参数可选<a class="hash-link" href="#5813-方法参数-fromquery-化参数非必填参数可选" title="Direct link to heading">#</a></h3><p>默认情况下，所有的基元类型参数都会贴上 <code>[FromRoute]</code> 特性，如果需要将参数调整为 <code>[FromQuery]</code> 修饰，只需要在方法上面贴 <code>[QueryParameters]</code> 特性即可，如：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[QueryParameters]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public string Get(int id, string name)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return nameof($&quot;{id} {name}&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>生成的路由为：<code>https://xxx.com?id=1&amp;name=Furion</code></p><p>如果不喜欢每个都配置，也可以全局配置（<strong>只会影响基元类型的参数</strong>）：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;DynamicApiControllerSettings&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;UrlParameterization&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>特别注意</h5></div><div class="admonition-content"><p>贴了 <code>[QueryParameters]</code> 之后，会对所有参数影响，包括类类型参数，如果不需要处理某个参数，只需要贴 <code>[FromXXX]</code> 特性即可。</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="5814-参数绑定配置"></a>5.8.14 参数绑定配置<a class="hash-link" href="#5814-参数绑定配置" title="Direct link to heading">#</a></h3><p><code>Furion</code> 框架提供了多种参数特性配置参数绑定规则：</p><ul><li><code>[FromRoute]</code>：通过路由参数绑定值</li><li><code>[FromQuery]</code>：通过 <code>Url</code> 地址参数绑定值</li><li><code>[FromBody]</code>：通过 <code>Request Body</code> 参数绑定值</li><li><code>[FromForm]</code>：通过表单提交绑定值</li><li><code>[FromHeader]</code>：通过 <code>Request Header</code> 参数绑定值</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="5815-自定义根据方法名生成-httpmethod-规则"></a>5.8.15 自定义根据方法名生成 <code>[HttpMethod]</code> 规则<a class="hash-link" href="#5815-自定义根据方法名生成-httpmethod-规则" title="Direct link to heading">#</a></h3><p>在 <code>Furion</code> 框架中，在没有配置 <code>[HttpMethod]</code> 特性的情况下，会自动根据方法名第一个参数进行分析，并生成对应的 <code>[HttpMethod]</code> 特性，规则如下：</p><ul><li>动作方法名<ul><li>以 <code>Post/Add/Create/Insert/Submit</code> 开头，则添加 <code>[HttpPost]</code> 特性。</li><li>以 <code>GetAll/GetList/Get/Find/Fetch/Query</code> 开头，则添加 <code>[HttpGet]</code> 特性。</li><li>以 <code>Put/Update</code> 开头，则添加 <code>[HttpPut]</code> 特性。</li><li>以 <code>Delete/Remove/Clear</code> 开头，则添加 <code>[HttpDelete]</code> 特性。</li><li>以 <code>Patch</code> 开头，则添加 <code>[HttpPatch]</code> 特性</li><li>已 <code>Head</code> 开头，则添加 <code>[HttpHead]</code> 特性</li><li><strong>支持自定义配置</strong></li></ul></li><li>如果不在上面约定中，则默认添加 <code>[HttpPost]</code> 特性。<strong>支持自定义配置</strong></li></ul><p><strong>但是，有些时候这不是我们想要的规则</strong>，这时我们只需要在 <code>appsettings.json</code> 中配置即可：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;DynamicApiControllerSettings&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;VerbToHttpMethods&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;getall&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;HEAD&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// =&gt; getall 会被复写为 `[HttpHead]`</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;other&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;PUT&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// =&gt; 新增一条新规则，比如，一 `[other]` 开头会转换为 `[HttpPut]` 请求</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>特别注意</h5></div><div class="admonition-content"><p>二维数组中的每一个元素的第一个元素<strong>必须是全小写</strong>，第二个元素<strong>必须是全大写大写</strong>，第二个元素取值有：<code>HEAD, GET, PUT, POST, PATCH, DELETE</code></p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="5816-路由参数非必填选填"></a>5.8.16 路由参数非必填/选填<a class="hash-link" href="#5816-路由参数非必填选填" title="Direct link to heading">#</a></h3><p>在 <code>Furion v2.8.6</code> 版本中实现了 <code>[FromRoute]</code> 参数非必填功能，支持以下几种方式：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// 方式一，通过可空 ?</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">public object Method1(int id, Datetime? dateTime)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">// 方式二，通过默认值</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public object Method1(int id, int age = 10)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">// 方式三，默认值 + 可空 ?</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public object Method1(int id, int? age = 10)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">// 方式四，[FromQuery] 修饰</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public object Method1(int id, [FromQuery]string keyword)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="5817-formroute-路由约束"></a>5.8.17 <code>[FormRoute]</code> 路由约束<a class="hash-link" href="#5817-formroute-路由约束" title="Direct link to heading">#</a></h3><p>在 <code>Furion v2.8.6</code> 版本中，添加了 <code>[RouteConstraint]</code> 特性，可配置路由约束，如：<code>[RouteConstraint(&quot;:min(10)&quot;)]</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// 最小值 10</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">public object Method1([RouteConstraint(&quot;:min(10)&quot;)] int id)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>[RouteConstraint]</code> 支持路由约束符号如下：</p><table><thead><tr><th>符号</th><th>描述</th><th>例子</th></tr></thead><tbody><tr><td><code>alpha</code></td><td>匹配大写或小写拉丁字母字符（a-z、A-Z）</td><td><code>:alpha</code></td></tr><tr><td><code>bool</code></td><td>bool 类型</td><td><code>:bool</code></td></tr><tr><td><code>datetime</code></td><td>DateTime 类型</td><td><code>:datetime</code></td></tr><tr><td><code>decimal</code></td><td>decimal 类型</td><td><code>:decimal</code></td></tr><tr><td><code>double</code></td><td>double 类型</td><td><code>:double</code></td></tr><tr><td><code>float</code></td><td>float 类型</td><td><code>:float</code></td></tr><tr><td><code>guid</code></td><td>guid 类型</td><td><code>:guid</code></td></tr><tr><td><code>int</code></td><td>int 类型</td><td><code>:int</code></td></tr><tr><td><code>long</code></td><td>long 类型</td><td><code>:long</code></td></tr><tr><td><code>length</code></td><td>匹配长度（字符串）</td><td><code>:length(6)</code> 或 <code>:length(1,20)</code></td></tr><tr><td><code>max</code></td><td>最大值</td><td><code>:max(10)</code></td></tr><tr><td><code>maxlength</code></td><td>最大长度（字符串）</td><td><code>:maxlength(10)</code></td></tr><tr><td><code>min</code></td><td>最小值</td><td><code>:min(10)</code></td></tr><tr><td><code>minlength</code></td><td>最小长度（字符串）</td><td><code>:minlength(10)</code></td></tr><tr><td><code>range</code></td><td>取值范围</td><td><code>:range(10,50)</code></td></tr><tr><td><code>regex</code></td><td>正则表达式</td><td><code>:regex(^\d{3}-\d{3}-\d{4}$)</code></td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="59-apidescriptionsettings"></a>5.9 <code>[ApiDescriptionSettings]</code><a class="hash-link" href="#59-apidescriptionsettings" title="Direct link to heading">#</a></h2><p>除了上述 <code>ASP.NET Core</code> 提供的配置外，<code>Furion</code> 框架还提供了非常强大且灵活的 <code>[ApiDescriptionSettings]</code> 特性。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="591-内置配置"></a>5.9.1 内置配置<a class="hash-link" href="#591-内置配置" title="Direct link to heading">#</a></h3><ul><li><code>Name</code>：自定义控制器/动作方法名称，<code>string</code>，默认 <code>null</code></li><li><code>KeepName</code>：是否保持原有名称不处理，<code>bool</code>，默认 <code>false</code></li><li><code>SplitCamelCase</code>：切割骆驼(驼峰)/帕斯卡命名，<code>bool</code>，默认 <code>true</code></li><li><code>KeepVerb</code>：是否保留动作方法请求谓词，<code>bool</code>，默认 <code>false</code></li><li><code>Enabled</code>：是否导出接口，<code>bool</code>，默认 <code>true</code></li><li><code>Module</code>：模块名，<code>string</code>，默认 <code>null</code></li><li><code>Version</code>：版本号，<code>string</code>，默认 <code>null</code></li><li><code>Groups</code>：接口分组，可结合 <code>Swagger</code> 一起使用，<code>string[]</code>，默认 <code>null</code></li><li><code>Tags</code>：接口标签，可结合 <code>Swagger</code> 一起使用，<code>string[]</code>，默认 <code>null</code></li><li><code>Order</code>：配置控制器/动作方法排序</li><li><code>LowercaseRoute</code>：是否采用小写路由，<code>bool</code> 类型，默认 <code>true</code></li><li><code>Area</code>：配置区域名称，默认空，<strong>只作用于类中贴</strong></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="592-name-配置"></a>5.9.2 <code>Name</code> 配置<a class="hash-link" href="#592-name-配置" title="Direct link to heading">#</a></h3><p><code>Name</code> 参数可以覆盖动态 <code>WebAPI</code> 自动生成的控制器或动作方法名称。如：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [ApiDescriptionSettings(Name = &quot;MyFur&quot;)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        [ApiDescriptionSettings(Name = &quot;MyGet&quot;)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string Get()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/namepz.png"><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="593-keepname-配置"></a>5.9.3 <code>KeepName</code> 配置<a class="hash-link" href="#593-keepname-配置" title="Direct link to heading">#</a></h3><p><code>KeepName</code> 参数可以保留原有的控制器或动作方法名称。如：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [ApiDescriptionSettings(KeepName = true)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        [ApiDescriptionSettings(KeepName = true)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string Get()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/keepnamepz.png"><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="594-splitcamelcase-配置"></a>5.9.4 <code>SplitCamelCase</code> 配置<a class="hash-link" href="#594-splitcamelcase-配置" title="Direct link to heading">#</a></h3><p><code>SplitCamelCase</code> 参数默认将骆驼(驼峰)命名切割成多个单词并通过指定 <code>占位符</code> 连接起来。默认 <code>占位符</code> 为 <code>-</code>。默认为 <code>true</code>。如：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [ApiDescriptionSettings(SplitCamelCase = false)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class MyFurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        [ApiDescriptionSettings(SplitCamelCase = true)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string ChangeUserName()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/splitnamepz.png"><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>特别注意</h5></div><div class="admonition-content"><p><code>KeepName</code> 优先级高于 <code>SplitCamelCase</code>，也就是 <code>KeepName</code> 设置为 <code>true</code>，则不会处理 <code>SplitCamelCase</code> 参数。</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="595-keepverb-配置"></a>5.9.5 <code>KeepVerb</code> 配置<a class="hash-link" href="#595-keepverb-配置" title="Direct link to heading">#</a></h3><p><code>KeepVerb</code> 参数作用于动作方法，标识是否保留动作谓词。如：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        [ApiDescriptionSettings(KeepVerb = true)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string GetVersion()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/keepverbpz.png"><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="596-enabled-配置"></a>5.9.6 <code>Enabled</code> 配置<a class="hash-link" href="#596-enabled-配置" title="Direct link to heading">#</a></h3><p><code>Enabled</code> 参数配置接口是否导出。通常用于动作方法，如果用于控制器实际作用不大。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string GetVersion()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        [ApiDescriptionSettings(false)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string NoExport()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/enablepz.png"><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="597-module-配置"></a>5.9.7 <code>Module</code> 配置<a class="hash-link" href="#597-module-配置" title="Direct link to heading">#</a></h3><p><code>Module</code> 参数可以配置路由分离，类似于 <code>Mvc 区域</code> 的作用。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [ApiDescriptionSettings(Module = &quot;mobile&quot;)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        [ApiDescriptionSettings(Module = &quot;user&quot;)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string GetVersion()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/modulepz.png"><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="598-version-配置"></a>5.9.8 <code>Version</code> 配置<a class="hash-link" href="#598-version-配置" title="Direct link to heading">#</a></h3><p><code>Version</code> 参数可以配置接口版本，同时又可以复写特殊版本命名配置。默认版本分隔符为 <code>@</code>。如：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [ApiDescriptionSettings(Version = &quot;1.0&quot;)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // V2.0.0 被复写成 V2.1.1</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        [ApiDescriptionSettings(Version = &quot;2.1.1&quot;)]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        public string GetVersionV2_0_0()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/versionpz.png"><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="599-groups-配置"></a>5.9.9 <code>Groups</code> 配置<a class="hash-link" href="#599-groups-配置" title="Direct link to heading">#</a></h3><p><code>Groups</code> 配置主要用于配置 <code>Swagger</code> 分组信息。</p><p>通过配置 <code>Groups</code> 参数可以将<code>控制器和动作方法</code> 进行归类和多个分组直接共享。可通过 <code>[ApiDescriptionSettings(params Groups)]</code> 构造函数传入或指定 <code>Groups</code> 参数配置接口是否导出。通常用于动作方法，如果用于控制器实际作用不大。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [ApiDescriptionSettings(&quot;Default&quot;, &quot;Common&quot;)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string Get()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        [ApiDescriptionSettings(&quot;Custom&quot;)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public int Get(int id)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return id;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/dfz.gif"><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="5910-tag-配置"></a>5.9.10 <code>Tag</code> 配置<a class="hash-link" href="#5910-tag-配置" title="Direct link to heading">#</a></h3><p><code>Tag</code> 配置主要用于配置 <code>Swagger</code> 标签分组信息及合并标签。也就是 <code>组中组</code>:</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">标签命名</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">合并标签</li></ul><div class="margin-vert--md"><div role="tabpanel"><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="未贴标签之前"></a>未贴标签之前<a class="hash-link" href="#未贴标签之前" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string Get()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public int Get(int id)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return id;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class TestAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string Get()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public int Get(int id)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return id;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="贴标签之后"></a>贴标签之后<a class="hash-link" href="#贴标签之后" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [ApiDescriptionSettings(Tag = &quot;分组一&quot;)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string Get()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public int Get(int id)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return id;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [ApiDescriptionSettings(Tag = &quot;分组二&quot;)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class TestAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string Get()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public int Get(int id)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return id;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/tag1.png"></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DynamicApiController;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [ApiDescriptionSettings(Tag = &quot;合并所有标签&quot;)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class FurionAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string Get()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public int Get(int id)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return id;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    [ApiDescriptionSettings(Tag = &quot;合并所有标签&quot;)]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class TestAppService : IDynamicApiController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string Get()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public int Get(int id)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return id;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如下图所示：</p><img src="/furion/img/tag2.png"></div></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>小知识</h5></div><div class="admonition-content"><p>如果 <code>Tag</code> 名字一样，则会自动合并，否则只是命名。</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="510-dynamicapicontrollersettings-配置"></a>5.10 <code>DynamicApiControllerSettings</code> 配置<a class="hash-link" href="#510-dynamicapicontrollersettings-配置" title="Direct link to heading">#</a></h2><p><code>Furion</code> 还提供动态 <code>WebAPI</code> 接口一些全局配置选项，如：</p><ul><li><code>DefaultRoutePrefix</code>：默认路由前缀，<code>string</code>，默认 <code>api</code></li><li><code>DefaultHttpMethod</code>：默认请求谓词，<code>string</code>，默认：<code>POST</code></li><li><code>DefaultModule</code>：默认模块名称（区域），可用作接口版本，<code>string</code>，默认：<code>v1</code></li><li><code>LowercaseRoute</code>：小写路由格式，<code>bool</code>，默认：<code>true</code></li><li><code>KeepVerb</code>：是否保留动作谓词，<code>bool</code>，默认：<code>false</code></li><li><code>KeepName</code>：是否保留默认名称，<code>bool</code>，默认：<code>fasle</code></li><li><code>CamelCaseSeparator</code>：骆驼(驼峰)/帕斯卡命名分隔符，<code>string</code>，默认：<code>-</code></li><li><code>VersionSeparator</code>：版本分隔符，<code>string</code>，默认：<code>@</code></li><li><code>ModelToQuery</code>：<code>GET/HEAD</code> 请求将 <code>类类型参数转查询参数</code>，<code>bool</code>，默认 <code>false</code></li><li><code>SupportedMvcController</code>：是否支持 <code>Mvc Controller</code> 动态配置，<code>bool</code>，默认 <code>false</code></li><li><code>UrlParameterization</code>：路由参数采用 <code>[FromQuery]</code> 化，默认 <code>false</code>（<code>[FromRoute]</code> 方式）</li><li><code>DefaultArea</code>：配置默认区域，默认 <code>null</code></li><li><code>AbandonControllerAffixes</code>：默认去除控制器名称前后缀列表名，<code>string[]</code>，默认：<ul><li><code>AppServices</code></li><li><code>AppService</code></li><li><code>ApiController</code></li><li><code>Controller</code></li><li><code>Services</code></li><li><code>Service</code></li></ul></li><li><code>AbandonActionAffixes</code>：默认去除动作方法名称前后缀列表名，<code>string[]</code>，默认：<ul><li><code>Async</code></li><li><code>VerbToHttpMethods</code>：复写默认方法名转 <code>[HttpMethod]</code> 规则，<code>string[][]</code> 二维数组类型，内置匹配规则为：<div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[&quot;post&quot;] = &quot;POST&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[&quot;add&quot;] = &quot;POST&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[&quot;create&quot;] = &quot;POST&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[&quot;insert&quot;] = &quot;POST&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[&quot;submit&quot;] = &quot;POST&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[&quot;get&quot;] = &quot;GET&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[&quot;find&quot;] = &quot;GET&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[&quot;fetch&quot;] = &quot;GET&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[&quot;query&quot;] = &quot;GET&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[&quot;getlist&quot;] = &quot;GET&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[&quot;getall&quot;] = &quot;GET&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[&quot;put&quot;] = &quot;PUT&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[&quot;update&quot;] = &quot;PUT&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[&quot;delete&quot;] = &quot;DELETE&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[&quot;remove&quot;] = &quot;DELETE&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[&quot;clear&quot;] = &quot;DELETE&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[&quot;patch&quot;] = &quot;PATCH&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>复写示例</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token property">&quot;DynamicApiControllerSettings&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;VerbToHttpMethods&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;getall&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;HEAD&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// =&gt; getall 会被复写为 `[HttpHead]`</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;other&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;PUT&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// =&gt; 新增一条新规则，比如，一 `[other]` 开头会转换为 `[HttpPut]` 请求</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="5101-支持-mvc-控制器-动态配置"></a>5.10.1 支持 <code>Mvc 控制器</code> 动态配置<a class="hash-link" href="#5101-支持-mvc-控制器-动态配置" title="Direct link to heading">#</a></h3><p>默认情况下，<code>Furion</code> 动态 <code>WebAPI</code> 接口不对 <code>ControllerBase</code> 类型进行任何处理。当然，我们也可以手动启用 <code>ControllerBase</code> 支持。</p><div class="codeBlockContainer_K1bP"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_eoMF">Furion.Web.Entry/appsettings.json</div><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;DynamicApiControllerSettings&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;SupportedMvcController&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>设置 <code>SupportedMvcController: true</code> 后，<code>Mvc ControllerBase</code> 类型也能和动态 <code>WebAPI</code> 一样的灵活了。代码如下：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Microsoft.AspNetCore.Mvc;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Furion.Web.Entry.Controllers</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    public class MvcController : ControllerBase</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string Get()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return nameof(Furion);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>注意事项</h5></div><div class="admonition-content"><p>启用该配置后，如果 <code>Mvc 控制器</code> 没有任何 <code>[Route]</code> 特性，但是贴了 <code>[ApiController]</code> 特性将会报错。原因是 <code>[ApiController]</code> 特性内部做了路由特性检测。所以建议使用 <code>[ApiDataValidation]</code> 代替。</p><p>查看 <a href="https://github.com/dotnet/aspnetcore/blob/c565386a3ed135560bc2e9017aa54a950b4e35dd/src/Mvc/Mvc.Core/src/ApplicationModels/ApiBehaviorApplicationModelProvider.cs#L90" target="_blank" rel="noopener noreferrer">ASP.NET Core - ApiBehaviorApplicationModelProvider 源码</a></p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="511-关于-aop-拦截"></a>5.11 关于 AOP 拦截<a class="hash-link" href="#511-关于-aop-拦截" title="Direct link to heading">#</a></h2><p><code>动态WebAPI</code> 支持 <code>Controller</code> 的所有过滤器/筛选器拦截，也就是可以通过 <code>ActionFilter</code>，<code>ResultFilter</code> 进行拦截操作。如：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">public class SampleAsyncActionFilter : IAsyncActionFilter</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    public async Task OnActionExecutionAsync(ActionExecutingContext context,ActionExecutionDelegate next)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // 拦截之前</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        var resultContext = await next();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // 拦截之后</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // 异常拦截</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if(resultContext.Exception != null)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>详细用法可参见 <a href="https://docs.microsoft.com/zh-cn/aspnet/core/mvc/controllers/filters?view=aspnetcore-5.0" target="_blank" rel="noopener noreferrer">ASP.NET Core 5.0 - 筛选器</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="512-设置-api-超时请求时间"></a>5.12 设置 <code>api</code> 超时请求时间<a class="hash-link" href="#512-设置-api-超时请求时间" title="Direct link to heading">#</a></h2><p>在 <code>Program.cs</code> 中添加 <code>.UseKestrel</code> 配置即可，如：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">public static IHostBuilder CreateHostBuilder(string[] args)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return Host.CreateDefaultBuilder(args)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        .ConfigureWebHostDefaults(webBuilder =&gt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            webBuilder.Inject()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                      .UseStartup&lt;Startup&gt;()</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">                      .UseKestrel(option =&gt;</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">                      {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">                          option.Limits.KeepAliveTimeout = TimeSpan.FromMinutes(20);</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">                          option.Limits.RequestHeadersTimeout = TimeSpan.FromMinutes(20);</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">                      });</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        });</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="513-反馈与建议"></a>5.13 反馈与建议<a class="hash-link" href="#513-反馈与建议" title="Direct link to heading">#</a></h2><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>与我们交流</h5></div><div class="admonition-content"><p>给 Furion 提 <a href="https://gitee.com/dotnetchina/Furion/issues/new?issue" target="_blank" rel="noopener noreferrer">Issue</a>。</p></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://gitee.com/dotnetchina/Furion/tree/master/handbook/docs/dynamic-api-controller.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF">Last updated on <b><time datetime="2021-06-30T07:11:03.000Z">6/30/2021</time></b> by <b>Monk</b></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/furion/docs/options"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« 4.2 选项</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/furion/docs/specification-document"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">6. 规范化接口文档 (Swagger) »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#51-什么是控制器" class="table-of-contents__link">5.1 什么是控制器</a></li><li><a href="#52-mvc-控制器-约定和缺点" class="table-of-contents__link">5.2 <code>Mvc 控制器</code> 约定和缺点</a><ul><li><a href="#521-webapi-约定" class="table-of-contents__link">5.2.1 <code>WebAPI</code> 约定</a></li><li><a href="#522-net-core-webapi-缺点" class="table-of-contents__link">5.2.2 <code>.NET Core WebAPI</code> 缺点</a></li></ul></li><li><a href="#53-动态-webapi-控制器" class="table-of-contents__link">5.3 动态 <code>WebAPI</code> 控制器</a></li><li><a href="#54-注册动态-webapi-服务" class="table-of-contents__link">5.4 注册动态 <code>WebAPI</code> 服务</a></li><li><a href="#55-第一个例子" class="table-of-contents__link">5.5 第一个例子</a></li><li><a href="#56-动态-webapi-原理解析" class="table-of-contents__link">5.6 动态 <code>WebAPI</code> 原理解析</a><ul><li><a href="#561-控制器特性提供器" class="table-of-contents__link">5.6.1 控制器特性提供器</a></li><li><a href="#562-应用模型转换器" class="table-of-contents__link">5.6.2 应用模型转换器</a></li></ul></li><li><a href="#57-动态-webapi-配置约定" class="table-of-contents__link">5.7 动态 <code>WebAPI</code> 配置约定</a><ul><li><a href="#571-控制器默认约定" class="table-of-contents__link">5.7.1 控制器默认约定</a></li><li><a href="#572-动作方法默认约定" class="table-of-contents__link">5.7.2 动作方法默认约定</a></li><li><a href="#573-请求谓词默认约定" class="table-of-contents__link">5.7.3 请求谓词默认约定</a></li><li><a href="#574-路由地址默认约定" class="table-of-contents__link">5.7.4 路由地址默认约定</a></li><li><a href="#575-其他约定" class="table-of-contents__link">5.7.5 其他约定</a></li></ul></li><li><a href="#58-更多例子" class="table-of-contents__link">5.8 更多例子</a><ul><li><a href="#581-多种请求谓词方法" class="table-of-contents__link">5.8.1 多种请求谓词方法</a></li><li><a href="#582-多个自定义动作方法" class="table-of-contents__link">5.8.2 多个自定义动作方法</a></li><li><a href="#583-带参数动作方法" class="table-of-contents__link">5.8.3 带参数动作方法</a></li><li><a href="#584-gethead-类类型参数" class="table-of-contents__link">5.8.4 <code>GET/HEAD</code> 类类型参数</a></li><li><a href="#585-自定义参数位置" class="table-of-contents__link">5.8.5 自定义参数位置</a></li><li><a href="#586-自定义请求谓词" class="table-of-contents__link">5.8.6 自定义请求谓词</a></li><li><a href="#587-支持多个谓词" class="table-of-contents__link">5.8.7 支持多个谓词</a></li><li><a href="#588-支持自定义路由" class="table-of-contents__link">5.8.8 支持自定义路由</a></li><li><a href="#589-多路由随意组合" class="table-of-contents__link">5.8.9 多路由随意组合</a></li><li><a href="#5810-支持版本控制" class="table-of-contents__link">5.8.10 支持版本控制</a></li><li><a href="#5811-不公开控制器或动作方法" class="table-of-contents__link">5.8.11 不公开控制器或动作方法</a></li><li><a href="#5812-保持控制器和方法命名" class="table-of-contents__link">5.8.12 保持控制器和方法命名</a></li><li><a href="#5813-方法参数-fromquery-化参数非必填参数可选" class="table-of-contents__link">5.8.13 方法参数 <code>[FromQuery]</code> 化/参数非必填/参数可选</a></li><li><a href="#5814-参数绑定配置" class="table-of-contents__link">5.8.14 参数绑定配置</a></li><li><a href="#5815-自定义根据方法名生成-httpmethod-规则" class="table-of-contents__link">5.8.15 自定义根据方法名生成 <code>[HttpMethod]</code> 规则</a></li><li><a href="#5816-路由参数非必填选填" class="table-of-contents__link">5.8.16 路由参数非必填/选填</a></li><li><a href="#5817-formroute-路由约束" class="table-of-contents__link">5.8.17 <code>[FormRoute]</code> 路由约束</a></li></ul></li><li><a href="#59-apidescriptionsettings" class="table-of-contents__link">5.9 <code>[ApiDescriptionSettings]</code></a><ul><li><a href="#591-内置配置" class="table-of-contents__link">5.9.1 内置配置</a></li><li><a href="#592-name-配置" class="table-of-contents__link">5.9.2 <code>Name</code> 配置</a></li><li><a href="#593-keepname-配置" class="table-of-contents__link">5.9.3 <code>KeepName</code> 配置</a></li><li><a href="#594-splitcamelcase-配置" class="table-of-contents__link">5.9.4 <code>SplitCamelCase</code> 配置</a></li><li><a href="#595-keepverb-配置" class="table-of-contents__link">5.9.5 <code>KeepVerb</code> 配置</a></li><li><a href="#596-enabled-配置" class="table-of-contents__link">5.9.6 <code>Enabled</code> 配置</a></li><li><a href="#597-module-配置" class="table-of-contents__link">5.9.7 <code>Module</code> 配置</a></li><li><a href="#598-version-配置" class="table-of-contents__link">5.9.8 <code>Version</code> 配置</a></li><li><a href="#599-groups-配置" class="table-of-contents__link">5.9.9 <code>Groups</code> 配置</a></li><li><a href="#5910-tag-配置" class="table-of-contents__link">5.9.10 <code>Tag</code> 配置</a></li></ul></li><li><a href="#510-dynamicapicontrollersettings-配置" class="table-of-contents__link">5.10 <code>DynamicApiControllerSettings</code> 配置</a><ul><li><a href="#5101-支持-mvc-控制器-动态配置" class="table-of-contents__link">5.10.1 支持 <code>Mvc 控制器</code> 动态配置</a></li></ul></li><li><a href="#511-关于-aop-拦截" class="table-of-contents__link">5.11 关于 AOP 拦截</a></li><li><a href="#512-设置-api-超时请求时间" class="table-of-contents__link">5.12 设置 <code>api</code> 超时请求时间</a></li><li><a href="#513-反馈与建议" class="table-of-contents__link">5.13 反馈与建议</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">文档</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/furion/docs/get-start">入门</a></li><li class="footer__item"><a class="footer__link-item" href="/furion/docs">指南</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">社区</h4><ul class="footer__items"><li class="footer__item"><a href="https://gitee.com/dotnetchina/Furion/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">讨论</a></li><li class="footer__item"><a href="https://gitee.com/dotnetchina/Furion/board" target="_blank" rel="noopener noreferrer" class="footer__link-item">看板</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">更多</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/furion/blog">博客</a></li><li class="footer__item"><a href="https://gitee.com/dotnetchina/Furion" target="_blank" rel="noopener noreferrer" class="footer__link-item">仓库</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://gitee.com/dotnetchina" target="_blank" rel="noopener noreferrer" class="footerLogoLink_qW4Z"><img class="footer__logo" src="/furion/img/chinadotnet.png" style="background:#fff;padding:5px 10px"></a></div><div class="footer__copyright">Copyright © 2020-2021 Furion, Baiqian Co.,Ltd.</div></div></div></footer><div class="furion-join-group"><a href="/furion/blog"> ✨ 尝鲜 .NET 6 Preview 6 版本 ✨</a></div></div>
<script src="/furion/assets/js/runtime~main.7bd0cc2c.js"></script>
<script src="/furion/assets/js/main.7dfe4c9c.js"></script>
</body>
</html>