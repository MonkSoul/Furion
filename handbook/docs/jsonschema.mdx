---
id: jsonschema
title: 2.13 JSON Schema 使用
sidebar_label: 2.13 JSON Schema 使用
description: 配置文件也要智能提示
---

import useBaseUrl from "@docusaurus/useBaseUrl";

## 2.13.1 关于 `JSON Schema`

`JSON Schema` 是用于验证 `JSON` 数据结构的强大工具，`Schema` 可以理解为模式或者规则。

**有了 `JSON Schema` 再也不怕配置写错的情况了！**

## 2.13.2 学习 `JSON Schema` 编写

作为一个框架提供 `JSON Schema` 是非常有必要的，可以让开发者在添加配置的时候能够有智能提示和校验功能，如果想学习 `JSON Schema` 编写可以查看以下文档：

- [https://json-schema.apifox.cn/](https://json-schema.apifox.cn/)
- [https://zhuanlan.zhihu.com/p/355175938](https://zhuanlan.zhihu.com/p/355175938)

这里也提供一个非常便捷的创建 `JSON Schema` 的在线网站，可以根据 `json` 文件内容自动生成 `JSON Schema`，之后进行小量修改即可：

[https://hellosean1025.github.io/json-schema-visual-editor/](https://hellosean1025.github.io/json-schema-visual-editor/)

## 2.13.3 框架提供

`Furion` 框架提供了完整的 `Furion` 和 `ASP.NET Core` 的 `JSON Schema` 文件，通过该文件可以在编写配置文件时提供完整的智能提示和校验。

**[查看 `JSON Schema` 源码地址](https://gitee.com/dotnetchina/Furion/raw/v4/schemas/v4/furion-schema.json)**

## 2.13.4 如何使用

使用方式非常简单，只需要在 `.json` 文件的头部添加 `"$schema": "https://gitee.com/dotnetchina/Furion/raw/v4/schemas/v4/furion-schema.json",` 即可，如：

```json showLineNumbers {2}
{
  "$schema": "https://gitee.com/dotnetchina/Furion/raw/v4/schemas/v4/furion-schema.json",

  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Warning",
      "Microsoft.Hosting.Lifetime": "Information",
      "Microsoft.EntityFrameworkCore": "Information",
      "Microsoft.AspNetCore.HttpLogging.HttpLoggingMiddleware": "Information"
    }
  },
  "AllowedHosts": "*"
}
```

<img src={useBaseUrl("img/js1.png")} />

<img src={useBaseUrl("img/js2.png")} />

<img src={useBaseUrl("img/js3.png")} />

<img src={useBaseUrl("img/js4.png")} />

<img src={useBaseUrl("img/js7.png")} />

## 2.13.5 `JSON Schema` 失效解决

如果添加了 `"$schema": "https://gitee.com/dotnetchina/Furion/raw/v4/schemas/v4/furion-schema.json",` 依然无法进行智能提示校验，可尝试关闭 `.json` 文件再重新打开。

如果上面步骤依然无效，那么还可以通过下面方式：

### 2.13.5.1 `Visual Studio`

<img src={useBaseUrl("img/js5.png")} />

<img src={useBaseUrl("img/js6.png")} />

### 2.13.5.2 `Visual Studio Code`

重启 `Visual Studio Code` 即可。

## 2.13.6 如何更新 `JSON Schema`

默认情况下，`JSON Schema` 在第一次获取之后会自动缓存起来，可能会导致 `.json` 文件提示错误，这个时候只需要删除缓存即可。

### 2.13.6.1 `Visual Studio`

打开电脑的 `运行` 并输入 `%AppData%`，之后进入 `C:\Users\你的电脑用户名\AppData\Local\Microsoft\VisualStudio` 下

<img src={useBaseUrl("img/js8.png")} />

<img src={useBaseUrl("img/js9.png")} />

<img src={useBaseUrl("img/js10.png")} />

**之后删除 `http/https` 开头的文件即可。**

### 2.13.6.2 `Visual Studio Code`

同上，运行进入 `%AppData%`，之后进入下列路径：`C:\Users\你的电脑用户名\AppData\Roaming\Code\User\globalStorage\vscode.json-language-features\json-schema-cache`

<img src={useBaseUrl("img/js11.png")} />

**之后删除这些文件即可。**

## 2.13.7 反馈与建议

:::note 与我们交流

给 Furion 提 [Issue](https://gitee.com/dotnetchina/Furion/issues/new?issue)。

:::
